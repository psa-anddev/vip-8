(ns vip-8.core
  (:require [vip-8.rom :as rom]))

(defn load-rom [filename]
  (let [font '(
               0xF0 0x90 0x90 0x90 0xF0 
               0x20 0x60 0x20 0x20 0x70
               0xF0 0x10 0xF0 0x80 0xF0
               0xF0 0x10 0xF0 0x10 0xF0
               0x90 0x90 0xF0 0x10 0x10
               0xF0 0x80 0xF0 0x10 0xF0
               0xF0 0x80 0xF0 0x90 0xF0
               0xF0 0x10 0x20 0x40 0x40
               0xF0 0x90 0xF0 0x90 0xF0
               0xF0 0x90 0xF0 0x10 0xF0
               0xF0 0x90 0xF0 0x90 0x90
               0xE0 0x90 0xE0 0x90 0xE0
               0xF0 0x80 0x80 0x80 0xF0
               0xE0 0x90 0x90 0x90 0xE0
               0xF0 0x80 0xF0 0x80 0xF0
               0xF0 0x80 0xF0 0x80 0x80)
        rom (rom/read-rom filename)]
    {:memory (into [] (concat (repeat 0x050 0x00) 
                              font
                              (repeat (- 0x200 (+ 0x50 (count font))) 
                                      0x00)
                              rom
                              (repeat (- 4096 (+ 0x200 (count rom)))
                                      0x00)))
     :stack []}))
